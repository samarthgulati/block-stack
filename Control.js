'use strict';var _createClass=function(){function b(c,d){for(var g,f=0;f<d.length;f++)g=d[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}return function(c,d,f){return d&&b(c.prototype,d),f&&b(c,f),c}}();function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError('Cannot call a class as a function')}var control=null,Control=function(){function b(){var f=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16;_classCallCheck(this,b),control||(control=this),this._anchor={x:0,y:0},this._r=c,this._x=0,this._y=0,this._thumb=document.createElement('nav');var d={position:'absolute',top:'0',left:'0',width:2*c+'px',height:2*c+'px',borderRadius:'50%',background:'hsla(200, 85%, 50%, 0.5)'};return Object.keys(d).forEach(function(g){return f._thumb.style[g]=d[g]}),this._addEventListeners(),document.body.appendChild(this._thumb),control}return _createClass(b,[{key:'update',value:function update(_ref){var c=_ref.x,d=_ref.y;this._x=c-this._r,this._y=d-this._r}},{key:'render',value:function render(){this._thumb.style.transform='translate('+this._x+'px, '+this._y+'px)'}},{key:'_handleDown',value:function _handleDown(c){c.preventDefault(),this._thumb.dispatchEvent(new CustomEvent('start-drag',{bubbles:!0,detail:c}))}},{key:'reset',value:function reset(){var d=this;this._thumb.style.pointerEvents='none';var c=this._thumb.animate([{transform:'translate('+this._x+'px, '+this._y+'px)'},{transform:'translate('+(this._anchor.x-this._r)+'px, '+(this._anchor.y-this._r)+'px)'}],{duration:300,easing:'ease-in-out'});c.onfinish=function(){d._thumb.style.pointerEvents='all',d.update(d._anchor)}}},{key:'_addEventListeners',value:function _addEventListeners(){this._handleDown=this._handleDown.bind(this);var c=InputEvents.EVENTS;this._thumb.addEventListener(c.down,this._handleDown)}},{key:'deltaX',get:function get(){var c=this._x-(this._anchor.x-this._r),d=this._y-(this._anchor.y-this._r),f=180*Math.atan2(d,c)/Math.PI,g=-25,h=150,j=60;return f>g-j&&f<g+j?Math.round(2*Math.pow(Math.pow(c,2)+Math.pow(0.5*d,2),0.5)/grid.size):f>h-j&&f<h+j?-Math.round(2*Math.pow(Math.pow(c,2)+Math.pow(0.5*d,2),0.5)/grid.size):0}},{key:'anchor',set:function set(c){this._anchor=c}}]),b}();