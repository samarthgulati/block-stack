'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var grid=null,Isometric=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.innerWidth,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window.innerHeight;return _classCallCheck(this,a),grid||(grid=this),this.board=b,this.size=Math.min(c,2*d)/this.board,this.hsize=0.5*this.size,this.qsize=0.25*this.size,this.zScale=1,this.zsize=this.zScale*this.hsize,c>d?(this.origin=[0.5*c-b*this.hsize,0.5*d],this.zMax=0.9*this.board):(this.origin=[0.5*c-b*this.hsize,0.75*d],this.zMax=2.4*this.board),this.width=c,this.height=d,this._canvas=document.createElement('canvas'),this._canvas.width=c,this._canvas.height=d,this.ctx=this._canvas.getContext('2d'),this._dragging=!1,this._addEventListeners(),document.body.appendChild(this._canvas),grid}return _createClass(a,[{key:'getCoord',value:function getCoord(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return[this.origin[0]+(b+c)*this.hsize,this.origin[1]+(c-b)*this.qsize-d*this.zsize]}},{key:'_start',value:function _start(b){this._dragging||(this._dragging=!0,this._update(b.detail))}},{key:'_update',value:function _update(b){if(this._dragging){var c=InputEvents.getPoint(b);control.update(c),control.anchor=num.shoveCoords,num.updateWidth(control.deltaX),this._canvas.dispatchEvent(new CustomEvent('update',{bubbles:!0,detail:num.props}))}}},{key:'_end',value:function _end(b){this._dragging&&(this._dragging=!1,num.updateArea(),this._update(b),control.anchor=num.shoveCoords,control.reset(),this._canvas.dispatchEvent(new CustomEvent('update',{bubbles:!0,detail:num.props})))}},{key:'_addEventListeners',value:function _addEventListeners(){var b=InputEvents.EVENTS;this._start=this._start.bind(this),this._update=this._update.bind(this),this._end=this._end.bind(this),document.body.addEventListener('start-drag',this._start),document.body.addEventListener(b.move,this._update),document.body.addEventListener(b.up,this._end),document.body.addEventListener(b.cancel,this._end)}}]),a}();